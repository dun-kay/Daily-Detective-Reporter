<!DOCTYPE html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N6HMN7VJ');</script>
<!-- End Google Tag Manager -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GWP6NSZ8Q"></script>
  
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5GWP6NSZ8Q');
</script>
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5825917506662262"
     crossorigin="anonymous"></script>

    <title>Historic Detective Reporter</title>
    
    <meta content="Use the clues to solve the historic news headlines." name="description">
    <meta content="Historic Detective Reporter" property="og:title">
    <meta content="Use the clues to solve the historic news headlines." property="og:description">
    
    <link href="styles.css" rel="stylesheet" type="text/css">
    
    <link href="ddrfavicon.png" rel="shortcut icon" type="image/x-icon">
    <link href="ddrfavicon (1).png" rel="apple-touch-icon">

   <style>
#CybotCookiebotDialog {
    @media {
        max-height: 350px !important;
    }
}
</style>
  
</head>

<body class="gbody e">
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6HMN7VJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <div id="GDiv" data-w-id="19b68e02-0fe3-c84d-2e3b-07b6dc4789d2" class="gdiv historic">
<script>
document.addEventListener("DOMContentLoaded", function() {
  const mainGameDiv = document.getElementById("GDiv");
  const popGDiv = document.getElementById("GPopDiv");
  const rulesButton = document.getElementById("showpop");
  const backButton = document.getElementById("showgame");

  // Function to show the popup and hide the main game div
  rulesButton.addEventListener("click", function(event) {
    event.preventDefault(); // Prevents the default link behavior
    mainGameDiv.style.display = "none"; // Hide the main game div
    popGDiv.style.display = "block"; // Show the popup
  });

  // Function to hide the popup and show the main game div
  backButton.addEventListener("click", function(event) {
    event.preventDefault(); // Prevents the default link behavior
    popGDiv.style.display = "none"; // Hide the popup
    mainGameDiv.style.display = "block"; // Show the main game div
  });
});
</script>
        <div class="gdivinnersmall game bold-text">
                            <div class="g3col">
                                <a href="#" class="gbuttonblue epoch w-button">Play historic news version</a><a id="showpop" data-w-id="b4f77517-bab5-359a-18fd-817fecf9e414" href="#" class="gbuttonblue w-button">Rules ?</a>
                            </div>
                            <div class="g3col">
                                <div class="titletext historic">Historic Detective Reporter</div>
                            </div>
                            <div class="g3col">
                                <div id="gamedate" class="textblue">11 Nov 2024</div>
                                <div id="guesscount" class="textpurple">Guess: 0</div>
                            </div>
        </div>
    <div class="gdivinnerbig">
        <div id="Col1" class="g5col">
            <div class="divcluegrid">
                <div class="cluetextdiv" id="1Clue1">‚è≥</div>
                <div class="cluetextdiv" id="2Clue1">‚è≥</div>
                <div class="cluetextdiv" id="3Clue1">üîÅ</div>
                <div class="cluetextdiv" id="4Clue1">üîÅ</div>
            </div>
            <div class="letterdivblank" id="l1.1"></div>
            <div class="letterdivblank" id="l1.2"></div>
            <div class="letterdivblank" id="l1.3"></div>
            <div class="letterdivblank" id="l1.4"></div>
            <div class="letterdivblank" id="l1.5"></div>
        </div>
        <div id="Col2" class="g5col"><div class="divcluegrid"><div class="cluetextdiv" id="1Clue2">‚è≥</div><div class="cluetextdiv" id="2Clue2">‚è≥</div><div class="cluetextdiv" id="3Clue2">üîÅ</div><div class="cluetextdiv" id="4Clue2">üîÅ</div></div><div class="letterdivblank" id="l2.1"></div><div class="letterdivblank" id="l2.2"></div><div class="letterdivblank" id="l2.3"></div><div class="letterdivblank" id="l2.4"></div><div class="letterdivblank" id="l2.5"></div></div><div id="Col3" class="g5col"><div class="divcluegrid"><div class="cluetextdiv" id="1Clue3">‚è≥</div><div class="cluetextdiv" id="2Clue3">‚è≥</div><div class="cluetextdiv" id="3Clue3">üîÅ</div><div class="cluetextdiv" id="4Clue3">üîÅ</div></div><div class="letterdivblank" id="l3.1"></div><div class="letterdivblank" id="l3.2"></div><div class="letterdivblank" id="l3.3"></div><div class="letterdivblank" id="l3.4"></div><div class="letterdivblank" id="l3.5"></div></div><div id="Col4" class="g5col"><div class="divcluegrid"><div class="cluetextdiv" id="1Clue4">‚è≥</div><div class="cluetextdiv" id="2Clue4">‚è≥</div><div class="cluetextdiv" id="3Clue4">üîÅ</div><div class="cluetextdiv" id="4Clue4">üîÅ</div></div><div class="letterdivblank" id="l4.1"></div><div class="letterdivblank" id="l4.2"></div><div class="letterdivblank" id="l4.3"></div><div class="letterdivblank" id="l4.4"></div><div class="letterdivblank" id="l4.5"></div></div>
        <div id="Col5" class="g5col">
            <div class="divcluegrid">
                <div class="cluetextdiv" id="1Clue5">‚è≥</div>
                <div class="cluetextdiv" id="2Clue5">‚è≥</div>
                <div class="cluetextdiv" id="3Clue5">üîÅ</div>
                <div class="cluetextdiv" id="4Clue5">üîÅ</div>
            </div>
            <div class="letterdivblank" id="l5.1"></div>
            <div class="letterdivblank" id="l5.2"></div>
            <div class="letterdivblank" id="l5.3"></div>
            <div class="letterdivblank" id="l5.4"></div>
            <div class="letterdivblank" id="l5.5"></div>
        </div>
    </div>
    <div class="gdivinnersmall">
        <div class="g1col">
            <div class="divkeyboardrow">
                <div id="1Clue1" class="divkey w-node-_1d610d54-b787-deeb-7be6-7b05876ab87a-b99e5b73">Q</div><div id="1Clue1" class="divkey w-node-de9dd6d8-d202-c1d2-4c93-2ea3dbba76fa-b99e5b73">W</div><div id="1Clue1" class="divkey w-node-_2e0d99c3-2658-536d-43a2-f289669a7e58-b99e5b73">E</div><div id="1Clue1" class="divkey w-node-_2da935ea-e913-7c93-7aa1-fbbd9ba0d4a2-b99e5b73">R</div><div id="1Clue1" class="divkey w-node-f918fa86-3255-5d90-3ddb-a20b39be98a5-b99e5b73">T</div><div id="1Clue1" class="divkey w-node-_95052a8b-16ec-a438-4584-7ddad6edd72c-b99e5b73">Y</div><div id="1Clue1" class="divkey w-node-e331eb96-6b5c-6a6b-60c2-5d3fcbfd450d-b99e5b73">U</div><div id="1Clue1" class="divkey w-node-_2256d16f-17bf-2eac-8faa-d5907616983f-b99e5b73">I</div><div id="1Clue1" class="divkey w-node-cd840af6-21d1-5732-4d31-43cb9d4ce845-b99e5b73">O</div><div id="1Clue1" class="divkey w-node-b826cc7a-2fc7-50e8-f806-f0c41124639c-b99e5b73">P</div></div><div class="divkeyboardrow"><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094d2-b99e5b73">A</div><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094d4-b99e5b73">S</div><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094d6-b99e5b73">D</div><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094d8-b99e5b73">F</div><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094da-b99e5b73">G</div><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094dc-b99e5b73">H</div><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094de-b99e5b73">J</div><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094e0-b99e5b73">K</div><div id="1Clue1" class="divkey w-node-_0decf0ec-614a-5093-eda2-7b07816094e2-b99e5b73">L</div><div id="1Clue1" class="divkey bks w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fd6-b99e5b73">‚å´</div></div><div class="divkeyboardrow"><div id="hintbutton" class="divkey enter hint w-node-_6964ac13-7581-2edf-daf1-0390a113e178-b99e5b73">HINT</div><div id="1Clue1" class="divkey w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fc8-b99e5b73">Z</div><div id="1Clue1" class="divkey w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fca-b99e5b73">X</div><div id="1Clue1" class="divkey w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fcc-b99e5b73">C</div><div id="1Clue1" class="divkey w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fce-b99e5b73">V</div><div id="1Clue1" class="divkey w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fd0-b99e5b73">B</div><div id="1Clue1" class="divkey w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fd2-b99e5b73">N</div><div id="1Clue1" class="divkey w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fd4-b99e5b73">M</div><div id="1Clue1" class="divkey enter w-node-_6f5138c5-7eff-52ec-1943-c01c45e92fc6-b99e5b73">ENTR</div></div></div></div>
      <div class="gamesbuttondiv">
      <div id="1Clue1" onclick="window.open('https://x.com/DKay6_37', '_blank');" role="button" tabindex="0" class="divkey enter makersmark w-node-c9376858-eb05-89d4-4982-bdea4c6d2f5c-b99e5b73">A GAME BY D. KAY</div>
      <div id="1Clue1" onclick="window.location.href='https://dailydetectivereporter.com';" role="button" tabindex="0" class="divkey enter makersmark historic w-node-c9376858-eb05-89d4-4982-bdea4c6d2f5c-b99e5b73">üëâ&nbsp;&nbsp;DAILY HEADLINES GAME</div>
      </div>
        <div id="loadingjava" class="divcode w-embed w-script">
                    <script>
  document.addEventListener("DOMContentLoaded", function() {
    const currentDate = new Date().toISOString().split('T')[0];
    let playedGames = JSON.parse(localStorage.getItem("playedGames")) || [];
    const games = [
  {
    "date": "0030-04-07",
    "gameDateFormatted": "7 Apr 30",
    "words": [
      { "word": "CHRIST", "clues": ["‚úùÔ∏è", "H", "R", "T"] },
      { "word": "CRUCIFIED", "clues": ["C", "‚úùÔ∏è", "U", "D"] },
      { "word": "FOLLOWERS", "clues": ["F", "üíí", "L", "S"] },
      { "word": "EXPECT", "clues": ["E", "ü§î", "C", "T"] },
      { "word": "RESURRECTION", "clues": ["R", "üëº", "U", "N"] }
    ],
    "firstHintLetter": "C",
    "thirdHintLetter": "F"
  },
  {
    "date": "0079-08-24",
    "gameDateFormatted": "24 Aug 79",
    "words": [
      { "word": "POMPEII", "clues": ["P", "üî•", "M", "I"] },
      { "word": "VOLCANO", "clues": ["V", "üåã", "L", "N"] },
      { "word": "ERUPTS", "clues": ["E", "üí•", "P", "S"] },
      { "word": "THOUSANDS", "clues": ["T", "üë•", "O", "S"] },
      { "word": "DIE", "clues": ["D", "üíÄ", "I", "E"] }
    ],
    "firstHintLetter": "P",
    "thirdHintLetter": "E"
  },
  {
    "date": "0312-10-28",
    "gameDateFormatted": "28 Oct 312",
    "words": [
      { "word": "CONSTANTINE", "clues": ["C", "üëë", "S", "E"] },
      { "word": "CONVERTS", "clues": ["C", "‚úùÔ∏è", "N", "S"] },
      { "word": "AFTER", "clues": ["A", "üí°", "T", "R"] },
      { "word": "CROSS", "clues": ["C", "‚úùÔ∏è", "O", "S"] },
      { "word": "VISION", "clues": ["V", "üëÅÔ∏è", "I", "N"] }
    ],
    "firstHintLetter": "C",
    "thirdHintLetter": "A"
  },
  {
    "date": "0410-08-24",
    "gameDateFormatted": "24 Aug 410",
    "words": [
      { "word": "BARBARIANS", "clues": ["B", "‚öîÔ∏è", "R", "S"] },
      { "word": "SACK", "clues": ["S", "üî•", "C", "K"] },
      { "word": "ROME", "clues": ["R", "üèõÔ∏è", "M", "E"] },
      { "word": "EMPIRE", "clues": ["E", "üëë", "P", "R"] },
      { "word": "FALLS", "clues": ["F", "üíî", "L", "S"] }
    ],
    "firstHintLetter": "B",
    "thirdHintLetter": "R"
  },
  {
    "date": "0452-06-15",
    "gameDateFormatted": "15 Jun 452",
    "words": [
      { "word": "ATTILA", "clues": ["A", "‚öîÔ∏è", "I", "A"] },
      { "word": "INVADES", "clues": ["I", "üö∂", "N", "S"] },
      { "word": "ITALY", "clues": ["I", "üáÆüáπ", "A", "Y"] },
      { "word": "ROME", "clues": ["R", "üèõÔ∏è", "M", "E"] },
      { "word": "TERRIFIED", "clues": ["T", "üò±", "R", "D"] }
    ],
    "firstHintLetter": "A",
    "thirdHintLetter": "I"
  },
  {
    "date": "0610-07-10",
    "gameDateFormatted": "10 Jul 610",
    "words": [
      { "word": "MUHAMMAD", "clues": ["M", "üåô", "H", "D"] },
      { "word": "STARTS", "clues": ["S", "üèÅ", "T", "S"] },
      { "word": "ISLAM", "clues": ["I", "‚ò™Ô∏è", "L", "M"] },
      { "word": "AFTER", "clues": ["A", "‚û°Ô∏è", "T", "R"] },
      { "word": "VISION", "clues": ["V", "üëÅÔ∏è", "S", "N"] }
    ],
    "firstHintLetter": "M",
    "thirdHintLetter": "S"
  },
  {
    "date": "0632-06-08",
    "gameDateFormatted": "8 Jun 632",
    "words": [
      { "word": "MUHAMMAD", "clues": ["M", "‚ò™Ô∏è", "H", "D"] },
      { "word": "DIES", "clues": ["D", "‚ö∞Ô∏è", "I", "S"] },
      { "word": "ISLAMIC", "clues": ["I", "‚ò™Ô∏è", "L", "C"] },
      { "word": "EMPIRE", "clues": ["E", "üè∞", "P", "E"] },
      { "word": "EXPANDS", "clues": ["E", "‚ÜîÔ∏è", "P", "S"] }
    ],
    "firstHintLetter": "M",
    "thirdHintLetter": "I"
  },
  {
    "date": "0800-12-25",
    "gameDateFormatted": "25 Dec 800",
    "words": [
      { "word": "FIRST", "clues": ["F", "1Ô∏è‚É£", "R", "T"] },
      { "word": "HOLY", "clues": ["H", "‚õ™", "L", "Y"] },
      { "word": "ROMAN", "clues": ["R", "üèõÔ∏è", "M", "N"] },
      { "word": "EMPEROR", "clues": ["E", "üëë", "P", "R"] },
      { "word": "CROWNED", "clues": ["C", "üëë", "O", "D"] }
    ],
    "firstHintLetter": "F",
    "thirdHintLetter": "R"
  },
  {
    "date": "1000-06-08",
    "gameDateFormatted": "8 Jun 1000",
    "words": [
      { "word": "VIKINGS", "clues": ["V", "üõ°Ô∏è", "K", "S"] },
      { "word": "DISCOVER", "clues": ["D", "üîç", "S", "R"] },
      { "word": "FAR", "clues": ["F", "‚û°Ô∏è", "R", " "] },
      { "word": "NORTH", "clues": ["N", "‚¨ÜÔ∏è", "R", "H"] },
      { "word": "LAND", "clues": ["L", "üåç", "N", "D"] }
    ],
    "firstHintLetter": "V",
    "thirdHintLetter": "D"
  },
  {
    "date": "1066-10-14",
    "gameDateFormatted": "14 Oct 1066",
    "words": [
      { "word": "WILLIAM", "clues": ["W", "‚öîÔ∏è", "L", "M"] },
      { "word": "INVADES", "clues": ["I", "üö∂", "A", "S"] },
      { "word": "ENGLAND", "clues": ["E", "üá¨üáß", "L", "D"] },
      { "word": "CLAIMS", "clues": ["C", "üìú", "A", "S"] },
      { "word": "THRONE", "clues": ["T", "üëë", "O", "E"] }
    ],
    "firstHintLetter": "W",
    "thirdHintLetter": "E"
  },
  {
    "date": "2001-09-11",
    "gameDateFormatted": "11 Sep 2001",
    "words": [
      { "word": "TERROR", "clues": ["T", "üí£", "R", "R"] },
      { "word": "ATTACK", "clues": ["A", "üî•", "T", "K"] },
      { "word": "DESTROYS", "clues": ["D", "üí•", "R", "S"] },
      { "word": "TWIN", "clues": ["T", "üè¢", "I", "N"] },
      { "word": "TOWERS", "clues": ["T", "üè¢", "W", "S"] }
    ],
    "firstHintLetter": "T",
    "thirdHintLetter": "A"
  }
  ];

    let currentGameDate = null;

    function setupCompletionObserver() {
      const gDivFin = document.querySelector('.gdiv.fin');
      if (!gDivFin) return;

      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.target.style.display === 'block') {
            markGameAsPlayed();
            observer.disconnect();
            console.log("Game completion detected and marked as played.");
            setTimeout(() => location.reload(), 8000);
          }
        });
      });

      observer.observe(gDivFin, { attributes: true, attributeFilter: ['style'] });
    }

    function markGameAsPlayed() {
      if (currentGameDate && !playedGames.includes(currentGameDate)) {
        playedGames.push(currentGameDate);
        localStorage.setItem("playedGames", JSON.stringify(playedGames));
        console.log("Game marked as played:", currentGameDate);
      } else {
        console.log("Game was already marked as played:", currentGameDate);
      }

      const storedGames = JSON.parse(localStorage.getItem("playedGames")) || [];
      if (storedGames.includes(currentGameDate)) {
        console.log("Verification successful: Game for", currentGameDate, "is in local storage.");
      } else {
        console.log("Verification failed: Game for", currentGameDate, "is not in local storage.");
      }
    }

function loadNextGame() {
  console.log("Current Date:", currentDate);
  console.log("Played Games List:", playedGames);

  // Check if there's an ongoing game stored in localStorage
  const storedGameDate = localStorage.getItem("currentGameDate");

  if (storedGameDate && !playedGames.includes(storedGameDate)) {
    // Load the stored game if it hasn't been played yet
    const storedGame = games.find(game => game.date === storedGameDate);
    if (storedGame) {
      console.log("Loading stored game:", storedGame.date);
      displayGame(storedGame);
      return;
    }
  }

  // If no stored game or it has been played, find a new game
  const unplayedGames = games.filter(game => !playedGames.includes(game.date));

  if (unplayedGames.length > 0) {
    // Shuffle the unplayed games and pick one at random
    const shuffledGames = unplayedGames.sort(() => Math.random() - 0.5);
    const randomGame = shuffledGames[0];
    console.log("Loading a random unplayed game:", randomGame.date);

    // Store the selected game in localStorage
    localStorage.setItem("currentGameDate", randomGame.date);

    displayGame(randomGame);
  } else {
    console.log("All games have been played!");
    showNoMoreGamesPopup(); // Show message when no more unplayed games are available
  }
}

function markGameAsPlayed() {
  if (currentGameDate && !playedGames.includes(currentGameDate)) {
    playedGames.push(currentGameDate);
    localStorage.setItem("playedGames", JSON.stringify(playedGames));
    console.log("Game marked as played:", currentGameDate);

    // Clear the current game from localStorage
    localStorage.removeItem("currentGameDate");
  } else {
    console.log("Game was already marked as played:", currentGameDate);
  }
}

function showNoMoreGamesPopup() {
  // Check if a popup already exists
  let popup = document.getElementById('no-more-games-popup');
  if (!popup) {
    // Create the popup div
    popup = document.createElement('div');
    popup.id = 'no-more-games-popup';
    popup.className = 'textpurple';
    popup.style.position = 'fixed';
    popup.style.top = '50%';
    popup.style.left = '50%';
    popup.style.transform = 'translate(-50%, -50%)';
    popup.style.backgroundColor = '#333d73';
    popup.style.padding = '20px';
    popup.style.borderRadius = '5px';
    popup.style.textAlign = 'center';
    popup.style.color = 'white';
    popup.style.fontFamily = 'Arial, sans-serif';
    popup.style.fontSize = '16px';
    popup.style.fontWeight = 'bold';
    popup.style.zIndex = '1000';
    popup.style.maxWidth = '80%';
    popup.style.boxShadow = '0px 4px 8px rgba(0, 0, 0, 0.3)';

    // Set the popup content
    popup.textContent = "You have played all available games. Check back tomorrow to play again!";

    // Append the popup to the document body
    document.body.appendChild(popup);
  }

  // Display the popup
  popup.style.display = 'block';

  // Auto-hide the popup after 5 seconds
  setTimeout(() => {
    popup.style.display = 'none';
  }, 5000);
}



    function displayGame(game) {
      if (!game || !game.words || !Array.isArray(game.words)) {
        console.error("Error: Invalid game object or missing 'words' property:", game);
        return;
      }

      currentGameDate = game.date;
      console.log("Displaying Game:", currentGameDate);
      const gameDateElement = document.getElementById("gamedate");
      if (gameDateElement) {
        gameDateElement.textContent = game.gameDateFormatted;
      }

      window.currentGame = game; // Set current game globally for later use

      game.words.forEach((wordObj, index) => {
        const columnNumber = index + 1;
        const columnElement = document.getElementById(`Col${columnNumber}`);
        if (columnElement) {
          columnElement.innerHTML = "";

          const clueContainer = document.createElement("div");
          clueContainer.classList.add("divcluegrid");

          if (Array.isArray(wordObj.clues)) {
            wordObj.clues.forEach((clue, clueIndex) => {
              const clueDiv = document.createElement("div");
              clueDiv.classList.add("cluetextdiv");
              clueDiv.setAttribute("id", `${clueIndex + 1}Clue${columnNumber}`);
              clueDiv.textContent = clue;
              clueContainer.appendChild(clueDiv);
            });
          }

          columnElement.appendChild(clueContainer);

          if (typeof wordObj.word === "string") {
            for (let i = 0; i < wordObj.word.length; i++) {
              const letterDiv = document.createElement("div");
              letterDiv.classList.add("letterdivblank");
              letterDiv.setAttribute("id", `l${columnNumber}.${i + 1}`);
              columnElement.appendChild(letterDiv);
            }
          }
        }
      });

      setupHints(game.firstHintLetter, game.thirdHintLetter);
    }

    function setupHints(firstHint, thirdHint) {
      window.firstHintLetter = firstHint;
      window.thirdHintLetter = thirdHint;
    }

    loadNextGame();
    setupCompletionObserver();

    // SECOND PART - ADDED AFTER ENSURING window.currentGame IS DEFINED
    let currentSelectedColumn = null;
    let guessCount = 0;
    let hintCount = 0;
    const maxHints = 3;

    // Check if currentGame is loaded before accessing properties
    if (window.currentGame && Array.isArray(window.currentGame.words)) {
      const answers = {};
      window.currentGame.words.forEach((wordObj, index) => {
        answers[`Col${index + 1}`] = wordObj.word;
      });

      const finalHeadline = window.currentGame.words.map(wordObj => wordObj.word).join(" ");
      const firstHintLetter = window.currentGame.firstHintLetter;
      const thirdHintLetter = window.currentGame.thirdHintLetter;

      // Remaining functions and logic go here for gameplay...
      // e.g., updateGuessCounter, selectColumn, insertLetter, etc.
    } else {
      console.error("Error: currentGame is undefined or does not have 'words' array.");
    }
  });
 document.addEventListener("DOMContentLoaded", function() {
    let currentSelectedColumn = null;
    let guessCount = 0;
    let hintCount = 0;
    const maxHints = 3;
    const currentGame = window.currentGame;
    const answers = {};

    currentGame.words.forEach((wordObj, index) => {
      answers[`Col${index + 1}`] = wordObj.word;
    });

    const finalHeadline = currentGame.words.map(wordObj => wordObj.word).join(" ");
    const firstHintLetter = currentGame.firstHintLetter;
    const thirdHintLetter = currentGame.thirdHintLetter;

    function updateGuessCounter(isCorrect) {
      guessCount += 1;
      const guessCounter = document.getElementById('guesscount');
      guessCounter.textContent = `Guess: ${guessCount}`;
      guessCounter.style.backgroundColor = isCorrect ? '#2da701' : '#c95700';

      setTimeout(() => {
        guessCounter.style.backgroundColor = '';
      }, 1000);
    }

    function selectColumn(columnId) {
      const selectedColumn = document.getElementById(columnId);
      if (selectedColumn && selectedColumn.dataset.correct === "true") return;

      document.querySelectorAll('.letterdivblank').forEach(div => {
        if (div.dataset.correct !== "true") div.style.backgroundColor = '#414e96';
      });

      if (selectedColumn) {
        selectedColumn.querySelectorAll('.letterdivblank').forEach(div => {
          if (div.dataset.correct !== "true") div.style.backgroundColor = '#b392de';
        });
      }
      currentSelectedColumn = columnId;
    }

    function insertLetter(letter) {
      if (!currentSelectedColumn) selectColumn('Col1');
      const selectedColumn = document.getElementById(currentSelectedColumn);
      const blanks = Array.from(selectedColumn.querySelectorAll('.letterdivblank'));

      for (let blank of blanks) {
        if (!blank.textContent.trim()) {
          blank.textContent = letter;
          break;
        }
      }
    }

    function backspace() {
      if (!currentSelectedColumn) return;
      const selectedColumn = document.getElementById(currentSelectedColumn);
      const blanks = Array.from(selectedColumn.querySelectorAll('.letterdivblank')).reverse();

      for (let blank of blanks) {
        if (blank.textContent.trim() && blank.dataset.correct !== "true") {
          blank.textContent = '';
          break;
        }
      }
    }

    function isColumnFilled() {
      if (!currentSelectedColumn) return false;
      const selectedColumn = document.getElementById(currentSelectedColumn);
      return Array.from(selectedColumn.querySelectorAll('.letterdivblank')).every(div => div.textContent.trim() !== "");
    }

    function showPopup(message) {
      let popup = document.getElementById('result-popup');
      if (!popup) {
        popup = document.createElement('div');
        popup.id = 'result-popup';
        popup.className = 'textpurple';
        popup.style.position = 'fixed';
        popup.style.top = '50%';
        popup.style.left = '50%';
        popup.style.transform = 'translate(-50%, -50%)';
        popup.style.backgroundColor = '#333d73';
        popup.style.padding = '8px';
        popup.style.borderRadius = '5px';
        popup.style.textAlign = 'center';
        popup.style.color = 'white';
        popup.style.fontFamily = 'Arial, sans-serif';
        popup.style.fontSize = '14px';
        popup.style.fontWeight = 'bold';
        document.body.appendChild(popup);
      }
      popup.textContent = message;
      popup.style.display = 'block';

      setTimeout(() => {
        popup.style.display = 'none';
      }, 1000);
    }

    function useHint() {
      if (hintCount >= maxHints) {
        showPopup("NO HINTS LEFT");
        return;
      }

      hintCount += 1;
      const hintActions = [
        () => fillLetterHints(firstHintLetter),
        fillEdgeLetters,
        () => fillLetterHints(thirdHintLetter)
      ];

      hintActions[hintCount - 1]();
    }

    function fillLetterHints(letter) {
      Object.keys(answers).forEach(colId => {
        const selectedColumn = document.getElementById(colId);
        const blanks = Array.from(selectedColumn.querySelectorAll('.letterdivblank'));
        const answer = answers[colId];

        blanks.forEach((blank, index) => {
          if (answer[index] === letter && blank && !blank.textContent.trim()) {
            blank.textContent = letter;
            blank.style.backgroundColor = '#2da701';
            blank.dataset.correct = "true";
          }
        });
      });
    }

    function fillEdgeLetters() {
      Object.keys(answers).forEach(colId => {
        const selectedColumn = document.getElementById(colId);
        const blanks = Array.from(selectedColumn.querySelectorAll('.letterdivblank'));
        const answer = answers[colId];

        if (blanks[0] && !blanks[0].textContent.trim()) {
          blanks[0].textContent = answer[0];
          blanks[0].style.backgroundColor = '#2da701';
          blanks[0].dataset.correct = "true";
        }

        const lastIndex = answer.length - 1;
        if (blanks[lastIndex] && !blanks[lastIndex].textContent.trim()) {
          blanks[lastIndex].textContent = answer[lastIndex];
          blanks[lastIndex].style.backgroundColor = '#2da701';
          blanks[lastIndex].dataset.correct = "true";
        }
      });
    }

    function validateGuess() {
      if (!isColumnFilled()) {
        showPopup("NOT ENOUGH LETTERS");
        return;
      }

      const selectedColumn = document.getElementById(currentSelectedColumn);
      const guess = Array.from(selectedColumn.querySelectorAll('.letterdivblank')).map(div => div.textContent.trim()).join("");
      const correctAnswer = answers[currentSelectedColumn];

      if (correctAnswer) {
        let isCorrect = true;

        setTimeout(() => {
          Array.from(selectedColumn.querySelectorAll('.letterdivblank')).forEach((div, index) => {
            if (guess[index] === correctAnswer[index]) {
              div.style.backgroundColor = '#2da701';
              div.dataset.correct = "true";
            } else {
              isCorrect = false;
              div.style.backgroundColor = '#c95700';
              setTimeout(() => {
                div.style.backgroundColor = currentSelectedColumn === selectedColumn.id ? '#b392de' : '#414e96';
                div.textContent = '';
              }, 1500);
            }
          });

          if (isCorrect) {
            selectedColumn.dataset.correct = "true";
            updateGuessCounter(true);
            revealCorrectClues(currentSelectedColumn);
            if (isAllColumnsCorrect()) {
              showFinalPopup();
            } else {
              selectNextColumn();
            }
          } else {
            updateGuessCounter(false);
          }
        }, 200);
      }
    }

    function revealCorrectClues(columnId) {
      const selectedColumn = document.getElementById(columnId);
      const clueDivs = Array.from(selectedColumn.querySelectorAll('.cluetextdiv'));

      clueDivs.forEach((div, index) => {
        setTimeout(() => {
          div.style.backgroundColor = '#2da701';
        }, index * 200);
      });
    }

    function isAllColumnsCorrect() {
      return Object.keys(answers).every(colId => {
        const selectedColumn = document.getElementById(colId);
        return Array.from(selectedColumn.querySelectorAll('.letterdivblank')).every(div => div.dataset.correct === "true");
      });
    }

function selectNextColumn() {
  // Iterate over all columns to find the next incomplete or incorrect one
  for (let i = 1; i <= 5; i++) {
    const columnId = `Col${i}`;
    const columnElement = document.getElementById(columnId);

    if (columnElement && columnElement.dataset.correct !== "true") {
      // Check if this column has any blank or incorrect letters
      const blanks = Array.from(columnElement.querySelectorAll('.letterdivblank'));
      const isIncomplete = blanks.some(div => !div.textContent.trim() || div.dataset.correct !== "true");

      if (isIncomplete) {
        setTimeout(() => {
          selectColumn(columnId); // Select the first incomplete column found
        }, 1000);
        return;
      }
    }
  }
}


    function showFinalPopup() {
      let popup = document.getElementById('result-popup');
      if (!popup) {
        popup = document.createElement('div');
        popup.id = 'result-popup';
        popup.className = 'textpurple';
        popup.style.position = 'fixed';
        popup.style.top = '50%';
        popup.style.left = '50%';
        popup.style.transform = 'translate(-50%, -50%)';
        popup.style.backgroundColor = '#333d73';
        popup.style.padding = '8px';
        popup.style.borderRadius = '5px';
        popup.style.textAlign = 'center';
        popup.style.color = 'white';
        popup.style.fontFamily = 'Arial, sans-serif';
        popup.style.fontSize = '14px';
        popup.style.fontWeight = 'bold';
        document.body.appendChild(popup);
      }

      popup.textContent = "YOU SOLVED IT! üéäüéä";
      popup.style.display = 'block';

      setTimeout(() => {
        popup.style.display = 'none';
        document.querySelector('.gdiv').style.display = 'none';
        document.querySelector('.gdiv.fin').style.display = 'block';
        displayFinalResults();
      }, 2000);
    }

    function displayFinalResults() {
      document.getElementById('finalguesscount').textContent = `Guesses: ${guessCount}`;
      document.getElementById('finalhintcount').textContent = `Hints: ${Math.min(hintCount, 3)}`;
      document.getElementById('finalheadline').textContent = `YOU SOLVED IT! ${finalHeadline}`;

      const gameDate = document.getElementById('gamedate').textContent;
      document.getElementById('finalgamedate').textContent = `Game date: ${gameDate}`;

      let countdown = 8;
      const countdownDisplay = document.getElementById('finalcountdown');
      countdownDisplay.textContent = `Keep playing ${countdown}`;

      const countdownInterval = setInterval(() => {
        countdown -= 1;
        countdownDisplay.textContent = `Keep playing ${countdown}`;
        if (countdown === 0) {
          clearInterval(countdownInterval);
          location.reload();
        }
      }, 1000);
    }

    document.getElementById('hintbutton').addEventListener('click', useHint);

    document.querySelectorAll('.divkey').forEach(key => {
      key.addEventListener('click', function() {
        const keyText = key.textContent.trim();
        if (keyText.length === 1 && /^[A-Z]$/i.test(keyText)) {
          insertLetter(keyText);
        }
        if (keyText === '‚å´') {
          backspace();
        }
        if (keyText === 'ENTR') {
          validateGuess();
        }
      });
    });

    ['Col1', 'Col2', 'Col3', 'Col4', 'Col5'].forEach(colId => {
      const column = document.getElementById(colId);
      if (column) {
        column.addEventListener('click', function() {
          selectColumn(colId);
        });
      }
    });
  });
</script>
</div><div id="gamejava" class="divcode w-embed"></div></div><div id="GDiv.Fin" class="gdiv fin historic"><div class="gdivinnersmall"><div class="g3col"></div><div class="g3col"><div class="titletext">Daily Detective Reporter</div></div><div class="g3col"></div></div><div class="gdivinnerbig"><div class="gpopdiv"><div id="finalheadline" class="textblue"></div><div class="gdivinnerbig pop"><div class="g2col"><div id="finalguesscount" class="textpurple">Guesses: 0</div></div><div class="g2col"><div id="finalhintcount" class="textpurple">Hints: 0</div></div></div><div id="finalgamedate" class="textblue">Game date:</div><div class="w-embed w-script">
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const copyButton = document.getElementById('sharegamebutton');
    const linkCollected = document.getElementById('linkcollected');

    // Check if elements exist
    if (copyButton && linkCollected) {
      copyButton.addEventListener('click', function(event) {
        event.preventDefault(); // Prevent default action of <a> tag

        // Copy the current page URL to the clipboard
        navigator.clipboard.writeText(window.location.href)
          .then(() => {
            console.log('URL copied to clipboard');

            // Hide the share button and show the confirmation message
            copyButton.style.display = 'none';
            linkCollected.style.display = 'block';

            // Set a timeout to reverse the visibility after 1 second
            setTimeout(() => {
              copyButton.style.display = 'inline-block';
              linkCollected.style.display = 'none';
            }, 1000);
          })
          .catch(err => {
            console.error('Failed to copy URL: ', err);
          });
      });
    } else {
      console.error('Button or confirmation div not found');
    }
  });
</script>
</div><a id="sharegamebutton" data-w-id="9db54890-a1f7-1225-607a-07ab603cff9e" class="gbuttonpurple w-button">Share Historic Detective Reporter ‚§¥Ô∏è</a><a id="linkcollected" data-w-id="661c485f-2c6e-1e22-8010-daa0d0a1012a" class="gbuttonpurple link w-button">Link copied to clipboard!</a>
<div class="addiv">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5825917506662262"
     crossorigin="anonymous"></script>
<!-- D24E Square Display Ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5825917506662262"
     data-ad-slot="1939737439"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div id="finalcountdown" class="textblue">Continue playing&nbsp;15</div></div></div></div><div id="GPopDiv" data-w-id="b14ec7a4-1854-741f-5e13-0d09b37c8a2f" class="gdiv pop historic"><div class="gdivinnersmall"><div class="g3col"><a id="showgame" data-w-id="8adcb491-73c1-ec1d-8645-59dcf137ed76" href="#" class="gbuttonblue w-button">Back</a></div><div class="g3col"></div><div class="g3col"></div></div><div class="gpopdiv"><div class="gdivinnerbig pop"><div class="g2col"><div class="textblue">Tap to select a clue</div></div><div class="g2col"><div id="1Clue3" class="cluetextdiv">C</div></div></div><div class="gdivinnerbig pop"><div class="g2col"><div class="textblue">Enter your guess</div></div><div class="g2col"><div class="textpurple">ENTR</div></div></div><div class="gdivinnerbig pop"><div class="g2col"><div class="textblue">Correct letters go</div></div><div class="g2col"><div id="1Clue3" class="cluetextdiv green">C</div></div></div><div class="gdivinnerbig pop"><div class="g2col"><div class="textblue">Incorrect letters go</div></div><div class="g2col"><div id="1Clue3" class="cluetextdiv yellow">B</div></div></div><div class="gdivinnerbig pop"><div class="g2col"><div class="textblue">Example: TENSIONS</div></div><div class="g2col"><div id="1Clue3" class="cluetextdiv">T</div><div id="1Clue3" class="cluetextdiv emoji">üò¨</div><div id="1Clue3" class="cluetextdiv emoji">üèπ</div><div id="1Clue3" class="cluetextdiv">S</div></div></div><div class="gdivinnerbig pop"><div class="g2col"><div class="textblue">No guess limit</div></div><div class="g2col"><div id="1Clue3" class="cluetextdiv emoji">üëç</div></div></div><div class="gdivinnerbig pop"><div class="g2col"><div class="textblue">Use hints for help</div></div><div class="g2col"><div class="textblue">HINT</div></div></div><div class="gdivinnerbig pop"><div class="g2col"><div class="textblue">Solve the headline</div></div><div class="g2col"><div id="1Clue3" class="cluetextdiv green">A</div><div id="1Clue3" class="cluetextdiv green">B</div><div id="1Clue3" class="cluetextdiv green">C</div><div id="1Clue3" class="cluetextdiv green">D</div></div></div></div></div>
</body>
</html>
